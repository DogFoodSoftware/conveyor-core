<div id="Backup-Protocol" class="blurbSummary grid_12"
     data-perspective="implementation">
  <div class="blurbTitle">Backup Protocol</div>
  <div class="p">
    The backup protocol determine what gets backed up, when, and how. The
    answer to "what gets backed up" is "everything". With storage costs what
    they are, it's easier and cheaper to back up everything than to deal with
    the extra cost of trying to separate out bits and pieces.
  </div>
  <div class="p">
    To answer the 'when' and the 'how', we find it useful to break up the data
    into four groups:
    <ul>
      <li>physical host / distro software,</li>
      <li>physical host logs,</li>
      <li>Conveyor VMs, and</li>
      <li>Conveyor data.</li>
    </ul>
    This breaks the total 'universe of bits' into four categories which
    determine the method and options available. These being:
    <ul>
      <li>re-installation,</li>
      <li>disk level mirroring, and</li>
      <li>periodic snapshots.</li>
    </ul>
  </div>
  <div class="p">
    Of course, other bit-divisions and methods are possible and, in future may
    even be necessary. However, for the current goals, the proposed divisions
    and methods are deems sufficient in terms of functionality and minimal in
    terms of complexity.
  </div>
  <div class="subHeader"><span>Re-Installation</span></div>
  <div class="p">
    Re-installation means the bits are not explicitly backed up. Rather, we
    trust to the original installation as being reliable. Re-installation
    is&mdash;on it's own&mdash;is essentially incompatible with
    customization. It also presents problems where it is necessary to back up
    to a specific version as generally one would re-install and patch, and the
    patches available at the time of install may be newer than the patches
    last applied to the software being restored.
  </div>
  <div class="subHeader"><span>Disk Level Mirroring</span></div>
  <div class="p">
    Disk level mirroring, or RAID 1, creates a live copy of the disk. Under
    certain failure scenarios in which one hard drive detectably fails while
    the other remains operational, the 'mirrored' image remains functionally
    unaffected and the mirror array is able to operate normally, except that
    of course further failure cannot be tolerated.
  </div>
  <div class="p">
    Mirroring increases cost and complexity in order to make downtime more
    predictible. Depending on the hardware configuration and the nature of the
    error, mirroing may or may not increase overall uptime. That is, in the
    face of the clean failure of a disk, the first benefit is that one need
    not deal with the failure immediately because current operations array is
    not immediately effected. The disk still must be replaced (and as there
    are more disks, it's not clear that this creates less work), but the work
    need not be performed immediately and may be scheduled with greater
    flexibility.
  </div>
  <div class="p">
    It is possible to use disk arrays for other purposes, such as improved
    performance and as a tool to create large volumes. Given current
    mainstream technologies and our primary target market we opt
    to <a href="#Keep-It-Simple">keep it simple</a> and just consider the
    single, disk-to-disk mirroring
    scenario. <a href="#Future-Considerations">Future considerations</a> are
    discussed later.
  </div>
  <div id="Periodic-Snapshots" class="blurbSummary grid_12">
    A periodic snapshot is just what it says. A snapshot of bits at a
    particular point in time. Snapshots may be taken at the volume or image
    level, or in a file-by-file manner.
  </div>
  <div class="p">
    A volume snapshot requires a compatible volume management system which can
    gurantee that all bits recorderd in the backup reflect the state of the
    volume as a whole at a given point in time even if some of the bits are
    changed before they are recorded. In the background, the volume manager
    tracks changes to volume bits in order to allow the original volume to
    continue functioning normally, but still provide a correct answer as to
    "what any given bit was" at the time of the snapshot to the backup.
  </div>
  <div class="p">
    Image snapshots work in a similar manner, but rather than a volume
    manager, the 'snapshot' capability is provided by the virtual machine
    manager, allowing one to take a consistent point-in-time snapshot of a
    running VM.
  </div>
  <div class="subHeader"><span>Backing Up Physical Hosts</span></div>
  <div class="p">
    Physical boxes are employed exclusively for the purpose of hosting virtual
    machines and local network storage volumes. Physical boxes may host a
    Conveyor instance, by which administrators may manage virtual machines and
    volumes. Conveyor does not support hosting public services directly on
    physical boxes.
  </div>
  <div class="p">
    As such, the backupt assumptions are rather thin for the host software. 
  </div>


  <div class="p">
    Workstations, in-office servers, test environments, and others which have
    a higher tolerance for downtime should generally stick with the first
    option. It is the least work and the least cost. Especially since a
    mirrored drive into the mix doesn't change the amount of work you do, it
    just allows you to defer the work to a more convenient time.
  </div>
  <div class="p">
    In other words, when one mirror goes down, policy requires that the
    machine be brought down and a new disk installed. So the machine still has
    to go down due to the failure, it just doesn't necessarily go down right
    when the failure occurs, as would be the case in a single disk /
    re-install scenario. Using RAID can slightly improve recovery time as well
    as the new disk generally needs to be 'merely' installed, after which it
    will automatically sync with the good disk.
  </div>
  <div class="subHeader"><span>Backing Up Physical Host / Distro Software</span></div>
  <div class="p">
    The physical host / distro software is the operating system and
    libraries installed and managed by the distro on a physical host. There
    are three backup options available for these bits. The first option is
    're-install'. These bits are entirely derived from the distro, so if bits
    are lost, they can be recovered by re-installing.
  </div>
  <div class="p">

  </div>
</div><!-- .blurbSummary#Backup-Protocol -->

